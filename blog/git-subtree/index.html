<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>Git Subtree Usage</title>
<meta name=description content="Game Developer / Computer Scientist"><meta name=keywords content='blog,developer,personal,Git'><meta property="og:url" content="https://seyahdoo.com/blog/git-subtree/"><meta property="og:type" content="website"><meta property="og:title" content="Git Subtree Usage"><meta property="og:description" content="Game Developer / Computer Scientist"><meta property="og:image" content="https://seyahdoo.com/images/avatar.png"><meta property="og:image:secure_url" content="https://seyahdoo.com/images/avatar.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Git Subtree Usage"><meta name=twitter:description content="Game Developer / Computer Scientist"><meta property="twitter:domain" content="https://seyahdoo.com/blog/git-subtree/"><meta property="twitter:url" content="https://seyahdoo.com/blog/git-subtree/"><meta name=twitter:image content="https://seyahdoo.com/images/avatar.png"><link rel=canonical href=https://seyahdoo.com/blog/git-subtree/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.fbe2f55794ed6ded1573152a130784ee5cb022de9676b19dd37d7559ee6f6fc6.js integrity="sha256-++L1V5Ttbe0VcxUqEweE7lywIt6WdrGd0311We5vb8Y="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-81CYH00FZ7"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-81CYH00FZ7")</script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://seyahdoo.com/><img src=/images/avatar.png alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://seyahdoo.com/>Bahar Doğan</a></div><div class=nav-links><div class=nav-link><a href=https://seyahdoo.com/blog/>Blog</a></div><div class=nav-link><a href=https://seyahdoo.com/tags/>Tags</a></div><div class=nav-link><a href=https://seyahdoo.com/projects/>Projects</a></div><div class=nav-link><a href=https://seyahdoo.com/hobbies/>Hobbies</a></div><div class=nav-link><a href=https://github.com/seyahdoo/><span data-feather=github></span></a></div><div class=nav-link><a href=https://www.linkedin.com/in/seyahdoo/><span data-feather=linkedin></span></a></div><div class=nav-link><a href=https://instagram.com/kardanbaba/><span data-feather=instagram></span></a></div><div class=nav-link><a href=https://discord.gg/ZtDFmjXe7w><img class=svg-inject src=/svg/icons/discord.svg></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://seyahdoo.com/blog/>Blog</a></li><li class=nav-item><a href=https://seyahdoo.com/tags/>Tags</a></li><li class=nav-item><a href=https://seyahdoo.com/projects/>Projects</a></li><li class=nav-item><a href=https://seyahdoo.com/hobbies/>Hobbies</a></li><li class=nav-item><a href=https://github.com/seyahdoo/><span data-feather=github></span></a></li><li class=nav-item><a href=https://www.linkedin.com/in/seyahdoo/><span data-feather=linkedin></span></a></li><li class=nav-item><a href=https://instagram.com/kardanbaba/><span data-feather=instagram></span></a></li><li class=nav-item><a href=https://discord.gg/ZtDFmjXe7w><img class=svg-inject src=/svg/icons/discord.svg></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>Git Subtree Usage</h1><small role=doc-subtitle></small><p class=post-date>July 30, 2024</p><ul class=post-tags><li class=post-tag><a href=https://seyahdoo.com/tags/git>Git</a></li></ul></div><div class=post-content><p><p>Git subtree is an alternative to git submodules. Its a way for having a git repo on another git repo.</p><p>It works by copying git commits from the child repo to mother repo. Usually we squash these commits to one root commit, but you may omit that to preserve history of child repo on the mother repo.</p><p>Since it copies the commits rather than having pointers. After the copying, the child repo can be destroyed and the mother repo will still have the files and will be fully functional.</p><p>Git subtree does not require anything on the user side. Only the person who modifies the subtrees needs to know and execute commands.</p><h1 id=adding-subtree-to-a-repo>Adding subtree to a repo</h1><pre tabindex=0><code>git stash --include-untracked
git subtree add --prefix themes/gokarna https://github.com/526avijitgupta/gokarna.git main --squash
git push
</code></pre><p>This will create a root commit that has all the changes of child repo fully squashed, and a merge commit that merges this root commit to the mother repo.</p><h1 id=updating-subtree-to-a-certain-branchcommit>Updating subtree to a certain branch/commit</h1><pre tabindex=0><code>git stash --include-untracked
git subtree pull --prefix themes/gokarna https://github.com/526avijitgupta/gokarna.git main --squash
git push
</code></pre><p>This will create a squash commit on the subtree root that has the changes from last known commit to specified commit. And a merge commit that merges the squash commit to the mother repo.</p><p>note: If you changed some child files on the mother repo, you may get a merge conflict while running this command. If you don’t care about the changes there, It might be easier to just remove the subtree and add it again.</p><h1 id=remove-subtree>Remove Subtree</h1><pre tabindex=0><code>rm themes/gokarna -r -Force
git add .
git commit -m &#34;remove subtree gokarna&#34;
git push
</code></pre><p>Subtrees do not have any hidden files inside the repo. They are just root commits and files. Just delete the files and commit.</p><h1 id=push-subtree-changes-to-child-repo-dont-do-it->Push Subtree changes to child repo (don’t do it :)</h1><pre tabindex=0><code>git add themes/gokarna
git commit -m &#34;subtree commit&#34;
git push
git subtree push --prefix=themes/gokarna https://github.com/526avijitgupta/gokarna.git main
</code></pre><p>Note: On some cases this may push all the history of the mother repo to child repo. I still don&rsquo;t understand how that might be possible. It might be a typo on my side. Online sources generally suggest not pushing subtree changes directly from mother repo to child repo. But anywho this is how to do it if you like.</p><h1 id=working-on-mother-repo-on-child-files>Working on mother repo on child files</h1><p>So you wanna do some changes on child, and you are on mother repo, what to do?</p><pre tabindex=0><code>Create a branch to do your changes in on mother repo.
Do your work, Do the changes on child files on mother repo, Create commits.
Test your solution, make sure everything works.
Make another clone of the child repo on your PC.
Copy the changes of child repo from mother repo manually.
Commit changes on child repo in a feature branch
Merge child feature branch to main
Update child subtree on mother to main
Merge feature branch on mother to main
</code></pre><h1 id=listing-existing-subtrees>Listing Existing Subtrees</h1><pre tabindex=0><code>git log | grep git-subtree-dir | tr -d &#39; &#39; | cut -d &#34;:&#34; -f2 | sort | uniq | xargs -I {} bash -c &#39;if [ -d $(git rev-parse --show-toplevel)/{} ] ; then echo {}; fi&#39;
</code></pre></p></div><div class=prev-next></div><script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function topFunction(){smoothScrollToTop()}function smoothScrollToTop(){const e=()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))};e()}</script></div></main><footer class=footer><span>&copy; 2024 Seyahdoo</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>